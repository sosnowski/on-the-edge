
DROP TABLE IF EXISTS responses;

CREATE TABLE responses (
  id bigint generated by default as identity primary key,

  survey_id EntityId not null,
  question_id EntityId not null,
  instance_id text not null,

  user_token text not null,
--   session_token text not null,

  content text null,
  
  created timestamp with time zone default timezone('utc'::text, now()) not null,
  updated timestamp with time zone default timezone('utc'::text, now()) not null,

  CONSTRAINT fkSurvey
      FOREIGN KEY(survey_id) 
      REFERENCES surveys(id),

	CONSTRAINT fkQuestion
      FOREIGN KEY(question_id) 
      REFERENCES questions(id)
);